(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{15:function(e,t,a){},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(7),u=a.n(l),c=a(2),o=a.n(c),i=a(4),m=a(1),s=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://swapi-trybe.herokuapp.com/api/planets/");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=Object(n.createContext)();function p(e){var t=e.children,a=["population","orbital_period","diameter","rotation_period","surface_water"],l=Object(n.useState)(a),u=Object(m.a)(l,2),c=u[0],p=u[1],E=Object(n.useState)([]),d=Object(m.a)(E,2),b=d[0],v=d[1],h=Object(n.useState)(b),j=Object(m.a)(h,2),O=j[0],y=j[1],C=Object(n.useState)(""),x=Object(m.a)(C,2),g=x[0],k=x[1],w=Object(n.useState)([]),N=Object(m.a)(w,2),S=N[0],V=N[1],B=Object(n.useState)("population"),F=Object(m.a)(B,2),q=F[0],_=F[1],P=Object(n.useState)("maior que"),I=Object(m.a)(P,2),L=I[0],J=I[1],R=Object(n.useState)("100000"),T=Object(m.a)(R,2),W=T[0],A=T[1];Object(n.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:t=e.sent,v(t.results),y(t.results);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){y(b.filter((function(e){var t=e.name.toLowerCase(),a=g.toLowerCase();return t.includes(a)})))}),[g]),Object(n.useEffect)((function(){var e=S.map((function(e){return e.column})),t=a.filter((function(t){return!e.includes(t)}));p(t)}),[S]),Object(n.useEffect)((function(){_(c[0])}),[c]),Object(n.useEffect)((function(){var e=b;S.forEach((function(t){switch(t.comparison){case"maior que":e=e.filter((function(e){return parseInt(e[t.column],10)>t.value}));break;case"menor que":e=e.filter((function(e){return parseInt(e[t.column],10)<t.value}));break;case"igual a":e=e.filter((function(e){return e[t.column]===t.value}))}})),y(e)}),[S]);var D={planets:O,columns:c,numericValues:{column:q,comparison:L,value:W},filters:{filterByName:{name:g},filterByNumericValues:S},setters:{setName:k,setFilterByNumericValues:V,setColumn:_,setComparison:J,setValue:A}};return r.a.createElement(f.Provider,{value:D},t)}function E(){var e=Object(n.useContext)(f).planets;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Rotation Period"),r.a.createElement("th",null,"Orbital Period"),r.a.createElement("th",null,"Diameter"),r.a.createElement("th",null,"Climate"),r.a.createElement("th",null,"Gravity"),r.a.createElement("th",null,"Terrain"),r.a.createElement("th",null,"Surface Water"),r.a.createElement("th",null,"Population"),r.a.createElement("th",null,"Films"),r.a.createElement("th",null,"Created"),r.a.createElement("th",null,"Edited"),r.a.createElement("th",null,"URL"))),r.a.createElement("tbody",null,e.map((function(e){return r.a.createElement("tr",{key:e.name},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.rotation_period),r.a.createElement("td",null,e.orbital_period),r.a.createElement("td",null,e.diameter),r.a.createElement("td",null,e.climate),r.a.createElement("td",null,e.gravity),r.a.createElement("td",null,e.terrain),r.a.createElement("td",null,e.surface_water),r.a.createElement("td",null,e.population),r.a.createElement("td",null,e.films),r.a.createElement("td",null,e.created),r.a.createElement("td",null,e.edited),r.a.createElement("td",null,e.url))}))))}function d(){var e=Object(n.useContext)(f),t=e.filters.FilterByName,a=e.setters.setName;return r.a.createElement("fieldset",null,r.a.createElement("input",{"data-testid":"name-filter",type:"text",placeholder:"Filtrar por nome",value:t,onChange:function(e){return a(e.target.value)}}))}var b=a(8);function v(){var e=Object(n.useContext)(f),t=e.columns,a=e.numericValues,l=a.column,u=a.comparison,c=a.value,o=e.filters.filterByNumericValues,i=e.setters,m=i.setFilterByNumericValues,s=i.setColumn,p=i.setComparison,E=i.setValue;return r.a.createElement("fieldset",null,r.a.createElement("select",{"data-testid":"column-filter",name:"column",value:l,onChange:function(e){return s(e.target.value)}},t.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("select",{"data-testid":"comparison-filter",name:"comparison",value:u,onChange:function(e){return p(e.target.value)}},r.a.createElement("option",{value:"maior que"},"maior que"),r.a.createElement("option",{value:"menor que"},"menor que"),r.a.createElement("option",{value:"igual a"},"igual a")),r.a.createElement("input",{type:"number","data-testid":"value-filter",name:"value",value:c,onChange:function(e){return E(e.target.value)}}),r.a.createElement("button",{"data-testid":"button-filter",type:"button",onClick:function(){m([].concat(Object(b.a)(o),[{column:l,comparison:u,value:c}]))}},"Filtrar"))}function h(){var e=Object(n.useContext)(f),t=e.filters.filterByNumericValues,a=e.setters.setFilterByNumericValues;return r.a.createElement("div",null,t.map((function(e){var n=e.column,l=e.comparison,u=e.value;return r.a.createElement("span",{"data-testid":"filter",key:"".concat(n," ").concat(l," ").concat(u)},"".concat(n," ").concat(l," ").concat(u),r.a.createElement("button",{type:"button",onClick:function(){return function(e){var n=t.filter((function(t){return t.column!==e}));a(n)}(n)}},"X"))})))}a(15);function j(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement("h1",null,"Projeto Star Wars - Trybe"),r.a.createElement(d,null),r.a.createElement(v,null),r.a.createElement(h,null)),r.a.createElement("main",null,r.a.createElement(E,null)))}a(16);var O=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(p,null,r.a.createElement(j,null)))};u.a.render(r.a.createElement(O,null),document.getElementById("root"))},9:function(e,t,a){e.exports=a(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.9724aae3.chunk.js.map